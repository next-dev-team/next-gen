#!/bin/bash
# Universal Agent Setup Script for {{projectName}}
# Generated by next-gen Universal Agent Generator

set -e

echo "ðŸ¤– Setting up Universal AI Agent Configuration for {{projectName}}..."

# Create central .agent directory
mkdir -p .agent/skills

{{#if cloneSkills}}
# Clone skills repository
if [ ! -d ".agent/skills/.git" ]; then
  echo "ðŸ“¦ Cloning antigravity-awesome-skills repository..."
  git clone https://github.com/sickn33/antigravity-awesome-skills.git .agent/skills
else
  echo "ðŸ“¦ Updating skills repository..."
  cd .agent/skills && git pull && cd ../..
fi
{{/if}}

{{#each agents}}
{{#if (eq this "cursor")}}
# Cursor Setup
echo "ðŸŽ¯ Configuring Cursor..."
mkdir -p .cursor/rules
{{/if}}

{{#if (eq this "trae")}}
# Trae Setup
echo "ðŸ”· Configuring Trae..."
mkdir -p .trae/rules
mkdir -p .trae/skills
{{#if ../createSymlinks}}
ln -sf "$(pwd)/AGENTS.md" ".trae/rules/AGENTS.md" 2>/dev/null || cp AGENTS.md .trae/rules/
ln -sf "$(pwd)/.agent/skills" ".trae/skills/universal" 2>/dev/null || cp -r .agent/skills .trae/skills/universal
{{/if}}
{{/if}}

{{#if (eq this "gemini-cli")}}
# Gemini CLI Setup
echo "ðŸ’Ž Configuring Gemini CLI..."
mkdir -p .gemini/skills
{{/if}}

{{#if (eq this "copilot")}}
# GitHub Copilot Setup
echo "ðŸ¤– Configuring GitHub Copilot..."
mkdir -p .github
{{/if}}

{{#if (eq this "windsurf")}}
# Windsurf Setup
echo "ðŸŒŠ Configuring Windsurf..."
mkdir -p .windsurf/rules
{{/if}}
{{/each}}

{{#if initGit}}
# Initialize Git repository
if [ ! -d ".git" ]; then
  echo "ðŸ“š Initializing Git repository..."
  git init
fi
{{/if}}

echo ""
echo "âœ¨ Setup complete! Your project is now configured for:"
{{#each agents}}
echo "  âœ“ {{this}}"
{{/each}}
echo ""
echo "ðŸ“– Read AGENTS.md for usage instructions"
echo "ðŸ”§ Skills are located in .agent/skills/"
