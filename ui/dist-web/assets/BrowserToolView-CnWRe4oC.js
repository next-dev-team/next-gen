import{aU as J,aW as Z,aV as ee,r as x,s as e,aX as te,R as U,aY as se}from"./index-DqN4Ab-6.js";import{a as E,c as re,X as ne,B as g,I as $,C as A,i as C,j as T,l as B,k as L}from"./x-CBMUblKp.js";import{P as ae,A as oe,a as W,S as ie}from"./scroll-area-DiaPH08x.js";import{A as ce,R as le,G as q,M as de}from"./rotate-cw-BzHEYHxH.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],he=E("network",ue);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],F=E("panel-right-close",me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],xe=E("panel-right-open",we),fe=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`,I="dashboard",G=[{id:I,title:"Dashboard",kind:"dashboard",closable:!1}],w=J(Z(ee((s,r)=>({tabs:G,activeTabId:I,tabStateById:{},devPanel:{isOpen:!1,width:420,activeTool:"react-query"},networkLogs:[],openUrlTab:(n,i)=>{const l=String(n||"").trim();if(!l)return null;const c=fe(),f={id:c,title:i||l,kind:"browser",closable:!0};return s(a=>({tabs:[...a.tabs,f],activeTabId:c,tabStateById:{...a.tabStateById,[c]:{url:l,canGoBack:!1,canGoForward:!1}}})),c},setActiveTab:n=>{r().tabs.some(l=>l.id===n)&&s({activeTabId:n})},closeTab:n=>{var a;if(n===I)return;const i=r().tabs,l=i.findIndex(b=>b.id===n);if(l<0)return;const c=i.filter(b=>b.id!==n),f=r().activeTabId===n?(a=c[l-1]||c[l]||c[0])==null?void 0:a.id:r().activeTabId;s(b=>{const{[n]:y,...o}=b.tabStateById;return{tabs:c,activeTabId:f||I,tabStateById:o}})},updateTabState:(n,i)=>{s(l=>({tabStateById:{...l.tabStateById,[n]:{...l.tabStateById[n]||{},...i||{}}}}))},setDevPanelOpen:n=>{s(i=>({devPanel:{...i.devPanel,isOpen:!!n}}))},setDevPanelWidth:n=>{const i=Math.max(280,Math.min(900,Number(n)||0));i&&s(l=>({devPanel:{...l.devPanel,width:i}}))},setDevPanelTool:n=>{const i=String(n||"").trim();i&&s(l=>({devPanel:{...l.devPanel,activeTool:i}}))},addNetworkLog:n=>{s(i=>({networkLogs:[n,...i.networkLogs].slice(0,200)}))},clearNetworkLogs:()=>s({networkLogs:[]})}),{name:"browser-tabs-store",version:1,partialize:s=>({tabs:s.tabs,activeTabId:s.activeTabId,tabStateById:s.tabStateById,devPanel:s.devPanel}),onRehydrateStorage:()=>(s,r)=>{if(r||!s)return;const n=Array.isArray(s.tabs)?s.tabs:[],i=n.some(c=>(c==null?void 0:c.id)===I),l=n.some(c=>(c==null?void 0:c.id)===s.activeTabId);if(!i){set(c=>({tabs:[G[0],...(Array.isArray(c.tabs)?c.tabs:[]).filter(f=>(f==null?void 0:f.id)!==I)],activeTabId:I}));return}l||set({activeTabId:I})}}),{name:"browser-tabs"}));function pe(s,r){x.useLayoutEffect(()=>{const n=s.current;if(!n||typeof ResizeObserver>"u")return;const i=new ResizeObserver(()=>r());return i.observe(n),()=>i.disconnect()},[r,s])}function R(s){const r=String(s||"").trim();return r?/^https?:\/\//i.test(r)||/^file:\/\//i.test(r)||/^about:/i.test(r)?r:/^localhost(:\d+)?(\/|$)/i.test(r)?`http://${r}`:r.includes(" ")?`https://www.google.com/search?q=${encodeURIComponent(r)}`:`https://${r}`:""}function be({onOpenUrl:s}){const[r,n]=x.useState(""),i=x.useMemo(()=>[{title:"Google",url:"https://www.google.com",group:"Search"},{title:"MDN",url:"https://developer.mozilla.org",group:"Docs"},{title:"GitHub",url:"https://github.com",group:"Dev"},{title:"Stack Overflow",url:"https://stackoverflow.com",group:"Dev"},{title:"YouTube",url:"https://youtube.com",group:"Entertainment"},{title:"Twitch",url:"https://twitch.tv",group:"Entertainment"},{title:"Netflix",url:"https://netflix.com",group:"Entertainment"},{title:"Spotify",url:"https://open.spotify.com",group:"Entertainment"}],[]),l=x.useMemo(()=>{const a=r.trim().toLowerCase();return a?i.filter(b=>[b.title,b.url,b.group].some(y=>String(y).toLowerCase().includes(a))):i},[i,r]),c=l.filter(a=>a.group==="Entertainment"),f=l.filter(a=>a.group!=="Entertainment");return e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs(A,{children:[e.jsxs(C,{className:"pb-3",children:[e.jsx(T,{className:"text-lg",children:"Dashboard"}),e.jsx(B,{children:"Search and open pages in new tabs."})]}),e.jsx(L,{className:"pt-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{value:r,onChange:a=>n(a.target.value),placeholder:"Search links or type a URL",className:"pl-9"})]}),e.jsx(g,{variant:"secondary",onClick:()=>{const a=R(r);a&&s(a)},children:"Open"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(A,{children:[e.jsxs(C,{className:"pb-3",children:[e.jsx(T,{className:"text-base",children:"Quick Links"}),e.jsx(B,{children:"Docs and development shortcuts."})]}),e.jsx(L,{className:"pt-0",children:e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:f.map(a=>e.jsxs(g,{onClick:()=>s(a.url),variant:"outline",className:"h-auto justify-between gap-2 px-3 py-2",children:[e.jsx("span",{className:"font-medium",children:a.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.group})]},a.url))})})]}),e.jsxs(A,{children:[e.jsxs(C,{className:"pb-3",children:[e.jsx(T,{className:"text-base",children:"Entertainment"}),e.jsx(B,{children:"Quick access for breaks."})]}),e.jsx(L,{className:"pt-0",children:e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:c.map(a=>e.jsxs(g,{onClick:()=>s(a.url),variant:"outline",className:"h-auto justify-between gap-2 px-3 py-2",children:[e.jsx("span",{className:"font-medium",children:a.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.group})]},a.url))})})]})]})]})}function ve(){const s=w(o=>o.devPanel),r=w(o=>o.setDevPanelTool),n=w(o=>o.setDevPanelOpen),i=w(o=>o.setDevPanelWidth),l=w(o=>o.networkLogs),c=w(o=>o.addNetworkLog),f=w(o=>o.clearNetworkLogs),a=x.useRef(!1),b=x.useRef(0),y=x.useRef(0);return x.useEffect(()=>{if(!s.isOpen||s.activeTool!=="network")return;const o=window.fetch;return window.fetch=async(...j)=>{const k=Date.now();try{const h=await o(...j);return c({kind:"fetch",url:String(j[0]),status:h.status,durationMs:Date.now()-k,at:new Date().toISOString()}),h}catch(h){throw c({kind:"fetch",url:String(j[0]),status:0,durationMs:Date.now()-k,at:new Date().toISOString(),error:String((h==null?void 0:h.message)||h)}),h}},()=>{window.fetch=o}},[c,s.activeTool,s.isOpen]),x.useEffect(()=>{const o=k=>{if(!a.current)return;const h=b.current-k.clientX;i(y.current+h)},j=()=>{a.current=!1};return window.addEventListener("mousemove",o),window.addEventListener("mouseup",j),()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",j)}},[i]),e.jsxs("div",{className:"relative h-full border-l bg-background",style:{width:s.width},children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-1 cursor-col-resize bg-transparent",onMouseDown:o=>{a.current=!0,b.current=o.clientX,y.current=s.width}}),e.jsxs("div",{className:"flex h-12 items-center justify-between gap-2 px-2",children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-1 overflow-x-auto",children:[e.jsxs(g,{size:"sm",variant:s.activeTool==="react-query"?"secondary":"ghost",onClick:()=>r("react-query"),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Query"]}),e.jsxs(g,{size:"sm",variant:s.activeTool==="inspector"?"secondary":"ghost",onClick:()=>r("inspector"),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Inspector"]}),e.jsxs(g,{size:"sm",variant:s.activeTool==="network"?"secondary":"ghost",onClick:()=>r("network"),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Network"]})]}),e.jsx(g,{size:"icon",variant:"ghost",onClick:()=>n(!1),children:e.jsx(F,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"h-[calc(100%-3rem)]",children:[s.activeTool==="react-query"?e.jsx(U.Suspense,{fallback:e.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loadingâ€¦"}),children:e.jsx(ge,{})}):null,s.activeTool==="inspector"?e.jsxs("div",{className:"p-4 text-sm",children:[e.jsx("div",{className:"font-medium",children:"Component inspector"}),e.jsx("div",{className:"mt-1 text-muted-foreground",children:"Use the inspector integration to jump from UI to source."})]}):null,s.activeTool==="network"?e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Network logs"}),e.jsx(g,{size:"sm",variant:"outline",onClick:f,children:"Clear"})]}),e.jsx(W,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[l.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No entries yet."}):null,l.map((o,j)=>e.jsxs("div",{className:"rounded-md border bg-background px-3 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"truncate text-sm font-medium",children:[o.status," ",o.kind]}),e.jsxs("div",{className:"shrink-0 text-xs text-muted-foreground",children:[o.durationMs,"ms"]})]}),e.jsx("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:o.url}),o.error?e.jsx("div",{className:"mt-1 truncate text-xs text-destructive",children:o.error}):null]},`${o.at}-${j}`))]})})]}):null]})]})}const ge=U.lazy(async()=>{const r=(await se(()=>import("./index-zioTSqyj.js"),[])).ReactQueryDevtoolsPanel;return{default:n=>e.jsx("div",{className:"h-full overflow-hidden",children:e.jsx(r,{onClose:()=>{const i=w.getState().setDevPanelOpen;i(!1)},style:{height:"100%",width:"100%"},...n})})}});function Ie(){var O,V,_;const s=w(t=>t.tabs),r=w(t=>t.activeTabId),n=w(t=>t.tabStateById),i=w(t=>t.setActiveTab),l=w(t=>t.closeTab),c=w(t=>t.openUrlTab),f=w(t=>t.updateTabState),a=w(t=>t.devPanel),b=w(t=>t.setDevPanelOpen),[y,o]=x.useState(""),j=x.useRef(null),k=x.useRef(null),h=s.some(t=>t.id===r)?r:(O=s[0])==null?void 0:O.id,d=s.find(t=>t.id===h)||s[0],P=n[h]||{},v=!!((V=window.electronAPI)!=null&&V.browserView);x.useEffect(()=>{if((d==null?void 0:d.kind)!=="browser"){o("");return}o(P.url||"")},[d==null?void 0:d.kind,P.url]);const S=x.useMemo(()=>async()=>{if(!v||!j.current||(d==null?void 0:d.kind)!=="browser")return;const t=j.current.getBoundingClientRect();await window.electronAPI.browserView.setBounds(h,{x:Math.round(t.left),y:Math.round(t.top),width:Math.round(t.width),height:Math.round(t.height)})},[d==null?void 0:d.kind,v,h]);pe(j,S),x.useEffect(()=>{const t=()=>S();return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[S]),x.useEffect(()=>{if(!v)return;const t=window.electronAPI.browserView.onState(u=>{u!=null&&u.tabId&&f(u.tabId,{url:u.url,canGoBack:u.canGoBack,canGoForward:u.canGoForward})});return()=>{typeof t=="function"&&t()}},[v,f]),x.useEffect(()=>{if(!v)return;(async()=>{if((d==null?void 0:d.kind)==="browser"){await window.electronAPI.browserView.show(h),await S();return}await window.electronAPI.browserView.hideAll()})().catch(()=>{})},[d==null?void 0:d.kind,v,h,S]);const M=async t=>{const u=R(t);if(!u)return;const m=c(u);if(m&&v)try{await window.electronAPI.browserView.create(m,u),await window.electronAPI.browserView.show(m)}catch(p){te.error("Failed to open tab",{description:String((p==null?void 0:p.message)||p)})}},N=(d==null?void 0:d.kind)==="browser",Q=!!P.canGoBack,X=!!P.canGoForward,H=!N||v&&!Q,K=!N||v&&!X,z=async()=>{if(!N)return;const t=R(y);if(t){if(f(h,{url:t}),v){await window.electronAPI.browserView.loadURL(h,t);return}k.current&&(k.current.src=t)}};return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-lg border bg-background",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b px-2 py-2",children:[e.jsx("div",{role:"tablist","aria-label":"Browser tabs",className:"flex flex-1 items-center gap-1 overflow-x-auto",children:s.map((t,u)=>{const m=t.id===h;return e.jsxs("div",{className:re("group flex items-center rounded-md border",m?"bg-accent text-accent-foreground":"bg-background hover:bg-accent"),children:[e.jsx("button",{id:`browser-tab-${t.id}`,type:"button",role:"tab","aria-selected":m,onClick:()=>i(t.id),onKeyDown:p=>{if(p.key!=="ArrowLeft"&&p.key!=="ArrowRight")return;p.preventDefault();const Y=p.key==="ArrowLeft"?Math.max(0,u-1):Math.min(s.length-1,u+1),D=s[Y];D!=null&&D.id&&i(D.id)},title:t.title,className:"flex items-center gap-2 px-3 py-1 text-sm",children:e.jsx("span",{className:"max-w-[220px] truncate",children:t.title})}),t.closable?e.jsx("button",{type:"button",onClick:()=>{l(t.id),v&&window.electronAPI.browserView.destroy(t.id).catch(()=>{})},className:"mr-1 flex h-6 w-6 items-center justify-center rounded hover:bg-background/60","aria-label":`Close ${t.title} tab`,children:e.jsx(ne,{className:"h-3.5 w-3.5 opacity-70 group-hover:opacity-100"})}):null]},t.id)})}),e.jsx(g,{size:"icon",variant:"ghost",onClick:()=>{M("https://www.google.com")},"aria-label":"New tab",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(g,{size:"icon",variant:"ghost",onClick:()=>b(!a.isOpen),"aria-label":"Toggle dev panel",children:a.isOpen?e.jsx(F,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b px-2 py-2",children:[e.jsx(g,{size:"icon",variant:"outline",disabled:H,onClick:()=>{var t,u,m,p;if(N){if(v){window.electronAPI.browserView.goBack(h);return}(p=(m=(u=(t=k.current)==null?void 0:t.contentWindow)==null?void 0:u.history)==null?void 0:m.back)==null||p.call(m)}},"aria-label":"Back",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(g,{size:"icon",variant:"outline",disabled:K,onClick:()=>{var t,u,m,p;if(N){if(v){window.electronAPI.browserView.goForward(h);return}(p=(m=(u=(t=k.current)==null?void 0:t.contentWindow)==null?void 0:u.history)==null?void 0:m.forward)==null||p.call(m)}},"aria-label":"Forward",children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(g,{size:"icon",variant:"outline",disabled:!N,onClick:()=>{var t,u,m;return v?window.electronAPI.browserView.reload(h):k.current?(m=(u=(t=k.current.contentWindow)==null?void 0:t.location)==null?void 0:u.reload)==null?void 0:m.call(u):null},"aria-label":"Reload",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx($,{value:y,onChange:t=>o(t.target.value),disabled:!N,placeholder:"Enter URL or search",onKeyDown:t=>{t.key==="Enter"&&z().catch(()=>{})}}),e.jsx(g,{variant:"secondary",disabled:!N,onClick:()=>z(),children:"Go"})]})]}),e.jsxs("div",{className:"flex min-h-0 flex-1",children:[e.jsxs("div",{className:"relative min-h-0 flex-1",children:[(d==null?void 0:d.kind)==="dashboard"?e.jsx(W,{className:"h-full",children:e.jsx(be,{onOpenUrl:M})}):null,(d==null?void 0:d.kind)==="browser"?e.jsx("div",{ref:j,className:"absolute inset-0",children:(_=window.electronAPI)!=null&&_.browserView?e.jsx("div",{className:"h-full w-full"}):e.jsx("iframe",{ref:k,title:"Web preview",className:"h-full w-full",src:P.url||"about:blank"})}):null]}),a.isOpen?e.jsx(ve,{}):null]})]})}export{Ie as default};
